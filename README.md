# Flask Blog

–ú–Ω–æ–≥–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è –±–ª–æ–≥-–ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –Ω–∞ Flask —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –ø–æ—Å—Ç–æ–≤ –∏ –æ–±—Å—É–∂–¥–µ–Ω–∏–π.

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **Backend:** Python 3.13+, Flask 3.x
- **Database:** SQLite (—á–∏—Å—Ç—ã–π SQL –±–µ–∑ ORM)
- **Frontend:** Bootstrap 5, Jinja2
- **Testing:** Pytest

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

    flask_blog/
    ‚îú‚îÄ‚îÄ app/
    ‚îÇ   ‚îú‚îÄ‚îÄ auth/                   # Blueprint –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ routes.py           # –ú–∞—Ä—à—Ä—É—Ç—ã (login, register, logout)
    ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ utils.py            # –£—Ç–∏–ª–∏—Ç—ã (—Ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ, –¥–∏—Å–∫—Ä–∏–º–∏–Ω–∞—Ç–æ—Ä)
    ‚îÇ   ‚îú‚îÄ‚îÄ db/                     # –ú–æ–¥—É–ª—å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ db.py               # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∏ CLI-–∫–æ–º–∞–Ω–¥—ã
    ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ schema.sql          # SQL-—Å—Ö–µ–º–∞ —Ç–∞–±–ª–∏—Ü
    ‚îÇ   ‚îú‚îÄ‚îÄ forms/                  # –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º (–±–µ–∑ WTForms)
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py         # –≠–∫—Å–ø–æ—Ä—Ç –∫–ª–∞—Å—Å–æ–≤
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.py             # RegistrationForm, LoginForm (—Å CSRF)
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ base.py             # –ë–∞–∑–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã Form, Field (—Å CSRF)
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ fields.py           # StringField, PasswordField, TextAreaField
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ validators.py       # Required, Length, EqualTo (Regexp TODO)
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ csrf.py             # CSRF-–∑–∞—â–∏—Ç–∞ (HMAC-SHA256)
    ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ post.py             # PostForm (—Å CSRF)
    ‚îÇ   ‚îú‚îÄ‚îÄ main/                   # Blueprint –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏ –ø–æ—Å—Ç–æ–≤
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
    ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ routes.py           # –ú–∞—Ä—à—Ä—É—Ç—ã –ø–æ—Å—Ç–æ–≤ (CRUD)
    ‚îÇ   ‚îú‚îÄ‚îÄ models/                 # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
    ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ post.py              # Post –º–æ–¥–µ–ª—å (–¥–∞–Ω–Ω—ã–µ + –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞)
    ‚îÇ   ‚îú‚îÄ‚îÄ services/               # –°–µ—Ä–≤–∏—Å–Ω—ã–π —Å–ª–æ–π
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
    ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ post_service.py     # PostService (–ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã —Å –ë–î)
    ‚îÇ   ‚îú‚îÄ‚îÄ static/                 # CSS, JS, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
    ‚îÇ   ‚îú‚îÄ‚îÄ templates/
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth/
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ login.html
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ register.html
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ main/
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.html      # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–æ —Å–ø–∏—Å–∫–æ–º –ø–æ—Å—Ç–æ–≤
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ create_post.html # –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ—Å—Ç–∞
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ view_post.html  # –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ—Å—Ç–∞
    ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ edit_post.html  # –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Å—Ç–∞
    ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ base.html           # –ë–∞–∑–æ–≤—ã–π —à–∞–±–ª–æ–Ω
    ‚îÇ   ‚îî‚îÄ‚îÄ __init__.py             # Application Factory
    ‚îú‚îÄ‚îÄ docs/
    ‚îÇ   ‚îî‚îÄ‚îÄ BlogPlatformDevelopmentPlan.md
    ‚îú‚îÄ‚îÄ instance/                   # SQLite –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
    ‚îú‚îÄ‚îÄ tests/
    ‚îÇ   ‚îú‚îÄ‚îÄ conftest.py             # Pytest —Ñ–∏–∫—Å—Ç—É—Ä—ã
    ‚îÇ   ‚îú‚îÄ‚îÄ test_auth.py            # –¢–µ—Å—Ç—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (—Å CSRF)
    ‚îÇ   ‚îú‚îÄ‚îÄ test_csrf.py            # –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–µ CSRF —Ç–µ—Å—Ç—ã
    ‚îÇ   ‚îú‚îÄ‚îÄ test_forms.py           # –¢–µ—Å—Ç—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ñ–æ—Ä–º (—Å CSRF)
    ‚îÇ   ‚îî‚îÄ‚îÄ test_posts.py           # –¢–µ—Å—Ç—ã —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ –ø–æ—Å—Ç–æ–≤ (—Å CSRF)
    ‚îú‚îÄ‚îÄ .env                        # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–Ω–µ –≤ git)
    ‚îú‚îÄ‚îÄ .gitignore
    ‚îú‚îÄ‚îÄ config.py                   # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
    ‚îú‚îÄ‚îÄ pyproject.toml
    ‚îú‚îÄ‚îÄ README.md
    ‚îú‚îÄ‚îÄ requirements.txt
    ‚îî‚îÄ‚îÄ wsgi.py                     # WSGI entrypoint

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.13+

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:**

        git clone <repository-url>
        cd flask_blog

2. **–°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:**

        python -m venv .venv

        # Linux/macOS:
        source .venv/bin/activate

        # Windows:
        .venv\Scripts\activate

3. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**

        pip install -r requirements.txt

   –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (–≤–∫–ª—é—á–∞—è pytest):

        pip install -e ".[dev]"

## –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

    flask --app app init-db

## –ó–∞–ø—É—Å–∫

**Development:**

    flask --app app run --debug

**Production (Gunicorn):**

    gunicorn wsgi:app

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É: http://127.0.0.1:5000

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

    pytest

–° –ø–æ–∫—Ä—ã—Ç–∏–µ–º:

    pytest --cov=app

### –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ç–µ—Å—Ç–æ–≤

- `make test` - –æ–±—ã—á–Ω—ã–µ —Ç–µ—Å—Ç—ã —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º
- `make test-clean` - —á–∏—Å—Ç—ã–µ —Ç–µ—Å—Ç—ã –±–µ–∑ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π
- `make test-unit` - unit —Ç–µ—Å—Ç—ã
- `make test-integration` - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
- `make test-database` - —Ç–µ—Å—Ç—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- `make test-security` - —Ç–µ—Å—Ç—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (–≤–∫–ª—é—á–∞—è CSRF)
- `make test-all` - –≤—Å–µ —Ç–∏–ø—ã —Ç–µ—Å—Ç–æ–≤

## Makefile

**Makefile** - —ç—Ç–æ —Ñ–∞–π–ª —Å –Ω–∞–±–æ—Ä–æ–º –∫–æ–º–∞–Ω–¥ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —á–∞—Å—Ç–æ –≤—ã–ø–æ–ª–Ω—è–µ–º—ã—Ö –∑–∞–¥–∞—á –≤ –ø—Ä–æ–µ–∫—Ç–µ. –û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ—Ä–æ—Ç–∫–∏–µ –∏ –∑–∞–ø–æ–º–∏–Ω–∞—é—â–∏–µ—Å—è –∫–æ–º–∞–Ω–¥—ã –≤–º–µ—Å—Ç–æ –¥–ª–∏–Ω–Ω—ã—Ö –∫–æ–Ω—Å–æ–ª—å–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π.

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏

- `make install` - —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞
- `make install-dev` - —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (–≤–∫–ª—é—á–∞—è pytest, black, flake8)

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

- `make test` - –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π
  ```
  83 passed, 3 skipped, 4 warnings in 9.17s
  ```

- `make test-clean` - –∑–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã —Å —á–∏—Å—Ç—ã–º –≤—ã–≤–æ–¥–æ–º (—Ç–æ–ª—å–∫–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç)
  ```
  ‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã!
  ```

- `make test-cov` - –∑–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º –∫–æ–¥–∞ –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π HTML-–æ—Ç—á—ë—Ç–∞
- `make test-unit` - –∑–∞–ø—É—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ unit —Ç–µ—Å—Ç—ã
- `make test-integration` - –∑–∞–ø—É—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
- `make test-all` - –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–∏–ø—ã —Ç–µ—Å—Ç–æ–≤

### –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞

- `make lint` - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–¥ —Å –ø–æ–º–æ—â—å—é –ª–∏–Ω—Ç–µ—Ä–æ–≤ (flake8, mypy)
- `make format` - –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ —Å –ø–æ–º–æ—â—å—é black
- `make clean` - –æ—á–∏—Å—Ç–∏—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –∏ –∫—ç—à

### –†–∞–±–æ—Ç–∞ —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º

- `make run` - –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- `make run-prod` - –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å gunicorn (–ø—Ä–æ–¥–∞–∫—à–µ–Ω-—Ä–µ–∂–∏–º)
- `make shell` - –∑–∞–ø—É—Å—Ç–∏—Ç—å Flask shell –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π —Ä–∞–±–æ—Ç—ã

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

- `make init-db` - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
- `make migrate` - –≤—ã–ø–æ–ª–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

- `make dev-setup` - –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –æ–∫—Ä—É–∂–µ–Ω–∏–µ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (—É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π + –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î)
- `make check` - –ø–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ (lint + —Ç–µ—Å—Ç—ã)
- `make ci` - –∑–∞–ø—É—Å—Ç–∏—Ç—å CI pipeline (–±—ã—Å—Ç—Ä—ã–µ —Ç–µ—Å—Ç—ã + –ª–∏–Ω—Ç–∏–Ω–≥)

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- `make stats` - –ø–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø—Ä–æ–µ–∫—Ç–∞ (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞)
- `make docs` - —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

**–ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤:**
```bash
make test-clean
```

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:**
```bash
make dev-setup
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞ –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º:**
```bash
make check
```

**–ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ:**
```bash
make run
```

## –ü–æ–¥–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è

### Python 3.12+ Timestamp Converter Warning

**–û–ø–∏—Å–∞–Ω–∏–µ:**
```
DeprecationWarning: The default timestamp converter is deprecated as of Python 3.12
```

**–ü–æ—á–µ–º—É –ø–æ–¥–∞–≤–ª–µ–Ω–æ:**
- –≠—Ç–æ —Ç–æ–ª—å–∫–æ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ, –Ω–µ –æ—à–∏–±–∫–∞
- –ö–æ–¥ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –°—Ç–∞—Ä—ã–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ
- –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –Ω–æ–≤—ã–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã —Ç—Ä–µ–±—É–µ—Ç –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π

**–ì–¥–µ –ø–æ–¥–∞–≤–ª–µ–Ω–æ:**

1. **–û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥** (`app/db/db.py`)
2. **–¢–µ—Å—Ç—ã** (`tests/conftest.py`)
3. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è pytest** (`pytest-clean.ini`)

**–ë—É–¥—É—â–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**

–ï—Å–ª–∏ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ –Ω–æ–≤—ã–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã Python 3.12+:
1. –£–±—Ä–∞—Ç—å –ø–æ–¥–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π
2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –Ω–æ–≤—ã–µ –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä—ã –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –º–µ—Ç–æ–∫
3. –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥ —Ä–∞–±–æ—Ç—ã —Å –¥–∞—Ç–∞–º–∏/–≤—Ä–µ–º–µ–Ω–µ–º

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–æ–¥–∞–≤–ª–µ–Ω–æ - —Ä–∞–±–æ—Ç–∞–µ–º –ø–æ —Å—Ç–∞—Ä—ã–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

–°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Discord-–ø–æ–¥–æ–±–Ω—ã–π –ø–æ–¥—Ö–æ–¥:

- **–ù–µ—É–Ω–∏–∫–∞–ª—å–Ω—ã–π –ª–æ–≥–∏–Ω** ‚Äî –º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –ª—é–±–æ–π –ª–æ–≥–∏–Ω, –¥–∞–∂–µ –∑–∞–Ω—è—Ç—ã–π
- **–î–∏—Å–∫—Ä–∏–º–∏–Ω–∞—Ç–æ—Ä** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —Ç–µ–≥ #0001‚Äì#9999
- **–§–æ—Ä–º–∞—Ç –≤—Ö–æ–¥–∞** ‚Äî `Username#1234`
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** ‚Äî PBKDF2-HMAC-SHA256 —Å —É–Ω–∏–∫–∞–ª—å–Ω–æ–π —Å–æ–ª—å—é

### –§–∏–∫—Å –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –ª–æ–≥–∏–Ω–∞ —Å –¥–∏—Å–∫—Ä–∏–º–∏–Ω–∞—Ç–æ—Ä–æ–º

**–ü—Ä–æ–±–ª–µ–º–∞:**
–ë—Ä–∞—É–∑–µ—Ä—ã –Ω–µ –º–æ–≥—É—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –∏ –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω—è—Ç—å –ª–æ–≥–∏–Ω—ã —Å –¥–∏—Å–∫—Ä–∏–º–∏–Ω–∞—Ç–æ—Ä–∞–º–∏ (`user#1234`), —Ç–∞–∫ –∫–∞–∫ –æ–Ω–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç —Ç–æ–ª—å–∫–æ –±–∞–∑–æ–≤—É—é —á–∞—Å—Ç—å (`user`). –≠—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ —Ç–æ–º—É, —á—Ç–æ –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –≤—Ö–æ–¥–µ –±—Ä–∞—É–∑–µ—Ä –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ `user`, –∞ –ø–∞—Ä–æ–ª—å –Ω–µ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è.

**–†–µ—à–µ–Ω–∏–µ:**
–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≥–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –±—Ä–∞—É–∑–µ—Ä—É –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ–º:

1. **–°–∫—Ä—ã—Ç–æ–µ –ø–æ–ª–µ** ‚Äî –≤ —Ñ–æ—Ä–º–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ `full_username` —Å –ø–æ–ª–Ω—ã–º –ª–æ–≥–∏–Ω–æ–º (`user#1234`)
2. **–í–∏–¥–∏–º–æ–µ –ø–æ–ª–µ** ‚Äî —Å–æ–¥–µ—Ä–∂–∏—Ç –±–∞–∑–æ–≤—ã–π –ª–æ–≥–∏–Ω (`user`) –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –±—Ä–∞—É–∑–µ—Ä–æ–º
3. **JavaScript —Ñ–∏–∫—Å** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç –≤–∏–¥–∏–º–æ–µ –ø–æ–ª–µ –Ω–∞ –ø–æ–ª–Ω—ã–π –ª–æ–≥–∏–Ω –ø—Ä–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–∏ –ø–∞—Ä–æ–ª—è
4. **–ö–ª–∏–∫–∞–±–µ–ª—å–Ω–∞—è –ø–æ–¥—Å–∫–∞–∑–∫–∞** ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –≤—Ä—É—á–Ω—É—é –∏—Å–ø—Ä–∞–≤–∏—Ç—å –ª–æ–≥–∏–Ω –∫–ª–∏–∫–æ–º –Ω–∞ –∑–µ–ª—ë–Ω—É—é –ø–æ–¥—Å–∫–∞–∑–∫—É

**–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**

```html
<!-- –°–∫—Ä—ã—Ç–æ–µ –ø–æ–ª–µ —Å –ø–æ–ª–Ω—ã–º –ª–æ–≥–∏–Ω–æ–º -->
<input type="hidden" id="full_username" name="full_username" value="user#1234">

<!-- –í–∏–¥–∏–º–æ–µ –ø–æ–ª–µ –¥–ª—è –±—Ä–∞—É–∑–µ—Ä–∞ -->
<input type="text" id="login_username" name="username" value="user">
```

```javascript
// –ü—Ä–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–∏ –ø–∞—Ä–æ–ª—è –æ–±–Ω–æ–≤–ª—è–µ–º –ª–æ–≥–∏–Ω
function updateUsername() {
    if (passwordInput.value && fullUsernameHidden.value) {
        usernameInput.value = fullUsernameHidden.value;
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—É—é –ø–æ–¥—Å–∫–∞–∑–∫—É
    }
}
```

**–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è HttpOnly cookie —Å —Ñ–ª–∞–≥–∞–º–∏ `Secure` –∏ `SameSite=Strict`
- JavaScript –Ω–µ –º–æ–∂–µ—Ç —á–∏—Ç–∞—Ç—å cookie ‚Äî —Ç–æ–ª—å–∫–æ —Å–µ—Ä–≤–µ—Ä
- –ü–æ–ª–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –æ—Å—Ç–∞—ë—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

**–§–∞–π–ª—ã:**
- `app/templates/auth/login.html` ‚Äî —Ñ–æ—Ä–º–∞ —Å –¥–≤–æ–π–Ω—ã–º–∏ –ø–æ–ª—è–º–∏
- `app/static/js/login-discriminator-update.js` ‚Äî JavaScript —Ñ–∏–∫—Å
- `app/auth/routes.py` ‚Äî —Å–µ—Ä–≤–µ—Ä–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º —Å–∫—Ä—ã—Ç–æ–≥–æ –ø–æ–ª—è

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **Service Layer Pattern** —Å —á—ë—Ç–∫–∏–º —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏:

### –ú–æ–¥–µ–ª–∏ (`app/models/`)
- **Post** - —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ –¥–∞–Ω–Ω—ã–µ –∏ –±–∞–∑–æ–≤—É—é –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É
- –ú–µ—Ç–æ–¥—ã: `is_author()`, `author_display_name`, `to_dict()`
- –ù–∏–∫–∞–∫–æ–π –ª–æ–≥–∏–∫–∏ —Ä–∞–±–æ—Ç—ã —Å –ë–î

### –°–µ—Ä–≤–∏—Å—ã (`app/services/`)
- **PostService** - –≤—Å—è –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Ç–æ–¥—ã: `create()`, `find_by_id()`, `get_all()`, `update()`, `delete()`
- –ò–Ω–∫–∞–ø—Å—É–ª–∏—Ä—É–µ—Ç SQL-–∑–∞–ø—Ä–æ—Å—ã –∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ç–∞–∫–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:
- ‚úÖ **–ß—ë—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ** - –º–æ–¥–µ–ª–∏ = –¥–∞–Ω–Ω—ã–µ, —Å–µ—Ä–≤–∏—Å—ã = –ª–æ–≥–∏–∫–∞
- ‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏
- ‚úÖ **–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å** - —Å–µ—Ä–≤–∏—Å—ã –ª–µ–≥–∫–æ –º–æ–∫–∞—Ç—å –≤ —Ç–µ—Å—Ç–∞—Ö
- ‚úÖ **–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ Flask best practices**

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –ø–æ—Å—Ç–æ–≤

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –ø–æ–ª–Ω—ã–π CRUD –¥–ª—è –ø–æ—Å—Ç–æ–≤:**

- **–°–æ–∑–¥–∞–Ω–∏–µ –ø–æ—Å—Ç–æ–≤** ‚Äî —Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø–æ—Å—Ç—ã
- **–ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ—Å—Ç–æ–≤** ‚Äî –≤—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –ø–æ—Å—Ç—ã
- **–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Å—Ç–æ–≤** ‚Äî —Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä –º–æ–∂–µ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ–∏ –ø–æ—Å—Ç—ã
- **–£–¥–∞–ª–µ–Ω–∏–µ –ø–æ—Å—Ç–æ–≤** ‚Äî —Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä –º–æ–∂–µ—Ç —É–¥–∞–ª—è—Ç—å —Å–≤–æ–∏ –ø–æ—Å—Ç—ã
- **–°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–æ—Å—Ç–æ–≤** ‚Äî –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤—Å–µ –ø–æ—Å—Ç—ã –±–ª–æ–≥–∞

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ—Å—Ç–∞:**
- –ó–∞–≥–æ–ª–æ–≤–æ–∫ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ, 1-200 —Å–∏–º–≤–æ–ª–æ–≤)
- –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ, 10-5000 —Å–∏–º–≤–æ–ª–æ–≤)
- –ê–≤—Ç–æ—Ä (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∏–∑ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
- –î–∞—Ç–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏)

**–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞:**
- –ê–Ω–æ–Ω–∏–º–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –ø–æ—Å—Ç—ã
- –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø–æ—Å—Ç—ã
- –¢–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä –º–æ–∂–µ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å/—É–¥–∞–ª—è—Ç—å —Å–≤–æ–∏ –ø–æ—Å—Ç—ã

## –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –±–µ–∑ WTForms:

**–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å:** –ó–∞–≥–ª—É—à–∫–∏ —Å TODO –¥–ª—è –±—É–¥—É—â–µ–≥–æ —Ä–∞–∑–≤–∏—Ç–∏—è

- **–ë–∞–∑–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã** ‚Äî `Form` –∏ `Field` –¥–ª—è –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ –æ–ø–∏—Å–∞–Ω–∏—è —Ñ–æ—Ä–º
- **–í–∞–ª–∏–¥–∞—Ç–æ—Ä—ã-–∑–∞–≥–ª—É—à–∫–∏** ‚Äî `Required`, `Length`, `EqualTo` (–≤—Ä–µ–º–µ–Ω–Ω–æ –≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç True)
- **TODO: Regexp** ‚Äî —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è –±—É–¥—É—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –≤ –±—É–¥—É—â–µ–º
- **–¢–∏–ø—ã –ø–æ–ª–µ–π** ‚Äî `StringField`, `PasswordField`, `TextAreaField`
- **CSRF-–∑–∞—â–∏—Ç–∞** ‚Äî —Ç–æ–∫–µ–Ω—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ `session` –∏ `SECRET_KEY`

**TODO –¥–ª—è –±—É–¥—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:**
- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è `DataRequired` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π
- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è `Length` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π/–º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –¥–ª–∏–Ω—ã  
- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è `Regexp` - —Å–∞–º–æ–ø–∏—Å–Ω–∞—è —Ä–µ–≥—É–ª—è—Ä–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è
- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è `EqualTo` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è –ø–æ–ª–µ–π
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä—ã: `Email`, `Username`, `PasswordStrength`, `UniqueUsername`

## CSRF –ó–∞—â–∏—Ç–∞

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é CSRF –∑–∞—â–∏—Ç—É —Å HMAC-SHA256 –ø–æ–¥–ø–∏—Å—å—é:

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

- **–Ø–¥—Ä–æ (`app/forms/csrf.py`)**: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–æ–≤
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è CSRF –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤ –±–∞–∑–æ–≤–æ–º –∫–ª–∞—Å—Å–µ `Form`
- **–®–∞–±–ª–æ–Ω—ã**: CSRF —Ç–æ–∫–µ–Ω –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ `{{ csrf_token() }}`

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚úÖ **–ö—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∞—è –∑–∞—â–∏—Ç–∞:**
- HMAC-SHA256 –ø–æ–¥–ø–∏—Å—å (–Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø–æ–¥–¥–µ–ª–∞—Ç—å –±–µ–∑ SECRET_KEY)
- –ü—Ä–∏–≤—è–∑–∫–∞ –∫ —Å–µ—Å—Å–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ó–∞—â–∏—Ç–∞ –æ—Ç —Ç–∞–π–º–∏–Ω–≥–æ–≤—ã—Ö –∞—Ç–∞–∫
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –≤ TESTING —Ä–µ–∂–∏–º–µ

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

**–í —Ñ–æ—Ä–º–∞—Ö (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏):**
```python
from app.forms import Form, StringField

class MyForm(Form):
    field = StringField('Field')
    
# –í —Ä–æ—É—Ç–µ:
form = MyForm(request.form)
if form.validate():  # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç CSRF
    # –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
```

**–í —à–∞–±–ª–æ–Ω–∞—Ö:**
```html
<form method="post">
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
    <!-- –ü–æ–ª—è —Ñ–æ—Ä–º—ã -->
</form>
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ CSRF

- **`tests/test_csrf.py`**: –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–µ —Ç–µ—Å—Ç—ã CSRF —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
- **–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Ñ–∏–∫—Å—Ç—É—Ä–∞ `csrf_token`** –≤ `conftest.py` –¥–ª—è DRY –ø—Ä–∏–Ω—Ü–∏–ø–∞
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã —Ç–µ—Å—Ç—ã: —É—Å—Ç—Ä–∞–Ω–µ–Ω–æ 15 –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–π, —ç–∫–æ–Ω–æ–º–∏—è ~50 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞

**–ó–∞–ø—É—Å–∫ CSRF —Ç–µ—Å—Ç–æ–≤:**
```bash
python -m pytest tests/test_csrf.py -v
```

## –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å

**‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**

- Application Factory –ø–∞—Ç—Ç–µ—Ä–Ω
- –ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å Blueprints (auth, main)
- –ü–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, –≤—Ö–æ–¥, –≤—ã—Ö–æ–¥)
- SQLite –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å –∫–∞—Å–∫–∞–¥–Ω—ã–º–∏ —É–¥–∞–ª–µ–Ω–∏—è–º–∏ (—á–∏—Å—Ç—ã–π SQL)
- Service Layer Pattern —Å —á—ë—Ç–∫–∏–º —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –º–æ–¥–µ–ª–µ–π –∏ —Å–µ—Ä–≤–∏—Å–æ–≤
- –°–æ–±—Å—Ç–≤–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ñ–æ—Ä–º —Å –∑–∞–≥–ª—É—à–∫–∞–º–∏ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–æ–≤
- **–ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è CSRF-–∑–∞—â–∏—Ç–∞ (HMAC-SHA256)**
- –ë–∞–∑–æ–≤—ã–π UI –Ω–∞ Bootstrap 5 —Å flash-—Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
- –ó–∞—â–∏—Ç–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤ (login_required)
- –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ç–µ—Å—Ç–æ–≤ (unit, integration, database, security)
- Makefile –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- CI/CD pipeline —á–µ—Ä–µ–∑ GitHub Actions
- **–ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π CRUD –¥–ª—è –ø–æ—Å—Ç–æ–≤ –±–ª–æ–≥–∞**
- **–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ—Ä–æ–≤ –∏ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞**

**üîÑ –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ:**

- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ñ–æ—Ä–º (–∑–∞–≥–ª—É—à–∫–∏ –≥–æ—Ç–æ–≤—ã, –Ω—É–∂–Ω–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è)
- –°–∏—Å—Ç–µ–º–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
- –ü–∞–≥–∏–Ω–∞—Ü–∏—è –∏ –º–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è

**üìä –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**

- –ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞: >80%
- –¢–∏–ø—ã —Ç–µ—Å—Ç–æ–≤: unit, integration, database, security
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ –≤ CI

## Contributors

–ú—ã –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ–º –≤–∫–ª–∞–¥ –≤ —Ä–∞–∑–≤–∏—Ç–∏–µ –ø—Ä–æ–µ–∫—Ç–∞! –ß—Ç–æ–±—ã –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è:

1. **Fork** —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è.
2. **–°–æ–∑–¥–∞–π—Ç–µ –≤–µ—Ç–∫—É** –¥–ª—è —Å–≤–æ–µ–π —Ñ–∏—á–∏ (`git checkout -b feature/AmazingFeature`).
3. **–ó–∞–∫–æ–º–º–∏—Ç—å—Ç–µ** –∏–∑–º–µ–Ω–µ–Ω–∏—è (`git commit -m 'Add some AmazingFeature'`).
4. **Push** –≤ –≤–µ—Ç–∫—É (`git push origin feature/AmazingFeature`).
5. –û—Ç–∫—Ä–æ–π—Ç–µ **Pull Request**.

–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∞—à–∏ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç (`pytest`) –∏ –≤—ã —Å–ª–µ–¥—É–µ—Ç–µ —Å—Ç–∏–ª—é –∫–æ–¥–∞ –ø—Ä–æ–µ–∫—Ç–∞.

## –ö–æ–Ω—Ç–∞–∫—Ç—ã

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è, –≤—ã –º–æ–∂–µ—Ç–µ —Å–≤—è–∑–∞—Ç—å—Å—è —Å –Ω–∞–º–∏:

- [Telegram —Å–æ–æ–±—â–µ—Å—Ç–≤–æ](https://t.me/python_nov)
- [Discord](https://discord.com/users/disciple_artem)

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT